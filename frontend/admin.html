<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard — LBRCE Food Court</title>

    <!-- Bootstrap 5 CSS (CDN) -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <!--
    ============================================
    Navigation Bar
    ============================================
    - Same nav as other pages, but "Admin" link is active
    - Additional admin nav: "Dashboard" | "Menu Management"
    -->

    <!--
    ============================================
    Admin Dashboard
    ============================================
    - Requires login + admin role — redirect if not admin
    - On page load: check user role, if not admin → redirect to index.html

    STATS CARDS ROW:
    - Bootstrap row with 4 col-md-3 cards:
      1. Today's Orders (number, icon: bi-bag)
      2. Pending Orders (number, icon: bi-clock, highlighted if > 0)
      3. Today's Revenue (₹ amount, icon: bi-currency-rupee)
      4. Popular Item (name + count, icon: bi-star)
    - Data from: GET /api/admin/stats

    PENDING ORDERS SECTION:
    - Heading: "Pending Orders" with count badge
    - Each pending order shown as a card:
      - Student name and phone
      - Stall name
      - Order items list with quantities
      - Total amount
      - Time ago: "5 minutes ago"
      - Action buttons:
        - "Approve" (green) — opens modal to set estimated_time
        - "Reject" (red) — opens modal to enter reason
    - Auto-refresh every 15 seconds to catch new orders

    APPROVE MODAL:
    - Bootstrap modal
    - Input: Estimated time in minutes (default: 15)
    - Confirm button → POST /api/admin/orders/:id/approve
    - On success: remove card from pending list, show toast

    REJECT MODAL:
    - Bootstrap modal
    - Input: Rejection reason (textarea, required)
    - Confirm button → POST /api/admin/orders/:id/reject
    - On success: remove card from pending list, show toast

    RECENT ORDERS TABLE:
    - Below pending orders
    - Table showing all today's orders (all statuses)
    - Columns: Order ID, Student, Stall, Amount, Status (badge), Time, Actions
    - Actions: "Mark Ready" (if approved), "Complete" (if ready)
    - Data from: GET /api/admin/orders
    -->

    <!-- Bootstrap 5 JS Bundle (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/config.js"></script>
    <script src="js/supabase.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/api.js"></script>
    <script src="js/admin.js"></script>
  </body>
</html>
